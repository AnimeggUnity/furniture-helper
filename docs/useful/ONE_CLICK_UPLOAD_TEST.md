# 一鍵上傳功能測試指南

## 測試環境準備

1. 確保 Chrome 擴充功能已正確載入
2. 前往新北市再生家具網站：https://recycledstuff.ntpc.gov.tw/BidMgr/
3. 確保已登入並有編輯權限
4. 準備一個打包好的 `_packaged.json` 檔案

## 測試步驟

### 1. 基本功能測試

#### 1.1 開啟編輯視窗
1. 點擊「新增」按鈕開啟編輯視窗
2. 確認表單正常載入
3. 檢查「匯入 JSON」按鈕是否存在

#### 1.2 選擇打包檔案
1. 點擊「匯入 JSON」按鈕
2. 選擇打包好的 `_packaged.json` 檔案
3. 確認檔案選擇成功

### 2. 文字資訊填充測試

#### 2.1 檢查基本欄位
- [ ] 品名欄位正確填入
- [ ] 類別欄位正確選擇
- [ ] 行政區欄位正確選擇
- [ ] 產品描述正確填入
- [ ] 尺寸欄位（長寬高）正確填入
- [ ] 交貨地點正確填入
- [ ] 價格欄位正確填入

#### 2.2 檢查特殊欄位
- [ ] 拍賣期間自動設定
- [ ] 下拉選單正確選擇
- [ ] 數字欄位格式正確

### 3. 圖片上傳測試

#### 3.1 上傳進度檢查
1. 觀察控制台日誌
2. 確認每張圖片的上傳進度
3. 檢查是否有錯誤訊息

#### 3.2 預覽建立檢查
- [ ] 圖片預覽正確顯示
- [ ] 預覽尺寸合適（100x100px）
- [ ] 檔案名稱正確顯示
- [ ] 刪除按鈕功能正常

#### 3.3 上傳結果驗證
- [ ] 所有圖片成功上傳
- [ ] 伺服器回應格式正確
- [ ] 圖片路徑有效

### 4. 錯誤處理測試

#### 4.1 網路錯誤測試
1. 在上傳過程中斷開網路
2. 確認錯誤處理機制
3. 檢查錯誤提示訊息

#### 4.2 檔案格式錯誤測試
1. 選擇非 JSON 檔案
2. 選擇格式錯誤的 JSON 檔案
3. 確認錯誤提示

#### 4.3 部分失敗測試
1. 準備包含無效 Base64 的 JSON
2. 確認部分圖片失敗不影響其他圖片
3. 檢查錯誤日誌

### 5. 效能測試

#### 5.1 大量圖片測試
1. 準備包含 5-10 張圖片的 JSON
2. 測試上傳時間
3. 檢查記憶體使用情況

#### 5.2 連續操作測試
1. 連續執行多次一鍵上傳
2. 確認不會相互干擾
3. 檢查系統穩定性

## 預期結果

### 成功情況
- ✅ JSON 檔案正確解析
- ✅ 所有文字欄位正確填入
- ✅ 所有圖片成功上傳
- ✅ 圖片預覽正確顯示
- ✅ 完成通知正確顯示
- ✅ 控制台日誌完整記錄

### 可能的問題
- ❌ 圖片上傳失敗：檢查網路連線和 API 端點
- ❌ 預覽建立失敗：檢查 DOM 結構和 CSS 樣式
- ❌ 欄位填充錯誤：檢查 JSON 格式和欄位映射
- ❌ 權限錯誤：檢查登入狀態和編輯權限

## 除錯指令

### 檢查 JSON 檔案
```javascript
// 檢查 JSON 結構
console.log('JSON 資料:', jsonData);
console.log('圖片數量:', jsonData.Photos?.length);
console.log('Base64 圖片:', jsonData.Photos?.map(p => p.Photo?.substring(0, 50) + '...'));
```

### 檢查上傳狀態
```javascript
// 檢查上傳區域
const uploadArea = document.querySelector('.el-upload__list');
console.log('上傳區域:', uploadArea);

// 檢查圖片預覽
const previews = document.querySelectorAll('.el-upload-list__item');
console.log('預覽數量:', previews.length);
```

### 檢查表單狀態
```javascript
// 檢查表單欄位
const form = document.querySelector('.vxe-modal--box .el-form');
const inputs = form.querySelectorAll('input, textarea, select');
inputs.forEach(input => {
  const label = input.closest('.el-form-item')?.querySelector('.el-form-item__label')?.textContent;
  console.log(`${label}: ${input.value}`);
});
```

## 測試案例

### 案例 1：基本功能測試
- **輸入**：包含 1-3 張圖片的標準 JSON
- **預期**：所有功能正常運作
- **驗證點**：文字填充、圖片上傳、預覽建立

### 案例 2：大量圖片測試
- **輸入**：包含 5-10 張圖片的 JSON
- **預期**：逐張上傳，進度顯示
- **驗證點**：上傳時間、記憶體使用、錯誤處理

### 案例 3：錯誤處理測試
- **輸入**：包含無效 Base64 的 JSON
- **預期**：部分失敗，其他正常
- **驗證點**：錯誤日誌、恢復機制

### 案例 4：網路問題測試
- **輸入**：正常 JSON，網路不穩定
- **預期**：錯誤提示，可重試
- **驗證點**：錯誤處理、使用者提示

## 注意事項

1. **測試環境**
   - 確保網路連線穩定
   - 使用真實的打包 JSON 檔案
   - 避免在生產環境測試

2. **測試資料**
   - 準備多種格式的測試檔案
   - 包含各種大小的圖片
   - 測試不同的 JSON 結構

3. **測試時機**
   - 選擇網路較穩定的時段
   - 避免伺服器高峰期
   - 準備足夠的測試時間

4. **結果記錄**
   - 詳細記錄測試結果
   - 截圖記錄問題
   - 保存錯誤日誌 