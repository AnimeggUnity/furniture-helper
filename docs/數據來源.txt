â— åˆ†æå®Œé€™å…©å€‹æª”æ¡ˆå¾Œï¼Œæˆ‘å¯ä»¥å‘Šè¨´ä½ å¹´åº¦çµ±è¨ˆåŠŸèƒ½æ˜¯å¾å“ªå€‹å…ƒç´ è¡¨æ ¼æå–å»ºç«‹æ—¥æœŸåšçµ±è¨ˆçš„ï¼š

  æ•¸æ“šä¾†æº

  å¹´åº¦çµ±è¨ˆåŠŸèƒ½å¾ Vue è¡¨æ ¼çµ„ä»¶ ä¸­æå–è³‡æ–™ï¼Œå…·é«”ä¾†æºæ˜¯ï¼š

  inject.js:4-8 - ç²å–è¡¨æ ¼æ•¸æ“šï¼š
  const table = document.querySelector('.vxe-table');
  let vue = table?.__vue__;
  let safety = 20;
  while (vue && !vue.tableFullData && safety-- > 0) vue = vue.$parent;
  const data = vue.tableFullData;

  çµ±è¨ˆçš„æ—¥æœŸæ¬„ä½

  inject.js:16-28 - CreateDate æ¬„ä½çµ±è¨ˆï¼š
  const raw = row.CreateDate;
  const str = typeof raw === 'string' ? raw : raw?.toISOString?.() ?? '';
  const ym = str.slice(0, 7);  // å¹´æœˆæ ¼å¼ï¼šYYYY-MM
  const date = str.slice(0, 10); // æ—¥æœŸæ ¼å¼ï¼šYYYY-MM-DD

  inject.js:31-37 - EndDate æ¬„ä½çµ±è¨ˆï¼š
  const endDateRaw = row.EndDate;
  const endDateStr = typeof endDateRaw === 'string' ? endDateRaw : endDateRaw?.toISOString?.() ?? '';
  const endDateYm = endDateStr.slice(0, 7);

  çµ±è¨ˆé¡å‹

  å¾ content.js:314-366 å¯ä»¥çœ‹åˆ°å››ç¨®çµ±è¨ˆï¼š

  1. å»ºç«‹æœˆä»½ - ä½¿ç”¨ CreateDate æ¬„ä½ï¼ˆå•†å“å»ºç«‹æ™‚é–“ï¼‰
  2. å»ºç«‹æ—¥æœŸ - ä½¿ç”¨ CreateDate æ¬„ä½ï¼ˆå•†å“å»ºç«‹æ™‚é–“ï¼‰
  3. å¹´åº¦çµ±è¨ˆ - ä½¿ç”¨ CreateDate æ¬„ä½ï¼ˆå•†å“å»ºç«‹æ™‚é–“ï¼‰
  4. çµæŸæœˆä»½ - ä½¿ç”¨ EndDate æ¬„ä½ï¼ˆæ‹è³£çµæŸæ™‚é–“ï¼‰

  æ‰€ä»¥çµ±è¨ˆåŠŸèƒ½æ˜¯å¾é é¢ä¸Šçš„ .vxe-table è¡¨æ ¼å…ƒç´ ä¸­çš„ Vue çµ„ä»¶æ•¸æ“š tableFullData æå– CreateDate å’Œ EndDate
  é€™å…©å€‹æ—¥æœŸæ¬„ä½ä¾†é€²è¡Œçµ±è¨ˆåˆ†æã€‚

> å¹«æˆ‘å¯«ä¸€å€‹chromeèƒ½ç”¨çš„æ§åˆ¶å°ç¨‹å¼ï¼Œç¢ºå®šä¸€ä¸‹ tableFullDataæ‰€æä¾›å®Œæ•´çš„æ¬„ä½æ¨™é¡Œ

â— // Chrome æ§åˆ¶å°ç¨‹å¼ - æª¢æŸ¥ tableFullData å®Œæ•´æ¬„ä½
  (function() {
      console.log('ğŸ” é–‹å§‹æª¢æŸ¥ tableFullData çš„å®Œæ•´æ¬„ä½...');

      // å°‹æ‰¾ vxe-table å…ƒç´ 
      const table = document.querySelector('.vxe-table');
      if (!table) {
          console.error('âŒ æœªæ‰¾åˆ° .vxe-table å…ƒç´ ');
          return;
      }

      console.log('âœ… æ‰¾åˆ° vxe-table å…ƒç´ ');

      // ç²å– Vue å¯¦ä¾‹
      let vue = table.__vue__;
      if (!vue) {
          console.error('âŒ æœªæ‰¾åˆ° Vue å¯¦ä¾‹');
          return;
      }

      // å‘ä¸ŠæŸ¥æ‰¾åŒ…å« tableFullData çš„çˆ¶çµ„ä»¶
      let safety = 20;
      while (vue && !vue.tableFullData && safety-- > 0) {
          vue = vue.$parent;
      }

      if (!vue || !vue.tableFullData) {
          console.error('âŒ æœªæ‰¾åˆ° tableFullData');
          return;
      }

      const data = vue.tableFullData;
      console.log('âœ… æ‰¾åˆ° tableFullDataï¼Œå…±æœ‰', data.length, 'ç­†è³‡æ–™');

      if (data.length === 0) {
          console.warn('âš ï¸ tableFullData ç‚ºç©ºé™£åˆ—');
          return;
      }

      // åˆ†ææ‰€æœ‰æ¬„ä½
      const allFields = new Set();
      const fieldTypes = {};
      const fieldSamples = {};

      data.forEach((row, index) => {
          Object.keys(row).forEach(key => {
              allFields.add(key);

              // è¨˜éŒ„æ¬„ä½é¡å‹
              const value = row[key];
              const type = value === null ? 'null' :
                          value === undefined ? 'undefined' :
                          Array.isArray(value) ? 'array' :
                          typeof value;

              if (!fieldTypes[key]) {
                  fieldTypes[key] = new Set();
              }
              fieldTypes[key].add(type);

              // è¨˜éŒ„æ¨£æœ¬å€¼ï¼ˆåªè¨˜éŒ„å‰3å€‹éç©ºå€¼ï¼‰
              if (value !== null && value !== undefined && value !== '') {
                  if (!fieldSamples[key]) {
                      fieldSamples[key] = [];
                  }
                  if (fieldSamples[key].length < 3) {
                      fieldSamples[key].push(value);
                  }
              }
          });
      });

      // è¼¸å‡ºçµæœ
      console.log('\nğŸ“Š å®Œæ•´æ¬„ä½åˆ†æå ±å‘Š');
      console.log('='.repeat(80));
      console.log(`ç¸½å…±æ‰¾åˆ° ${allFields.size} å€‹æ¬„ä½\n`);

      // æŒ‰å­—æ¯é †åºæ’åˆ—æ¬„ä½
      const sortedFields = Array.from(allFields).sort();

      sortedFields.forEach((field, index) => {
          const types = Array.from(fieldTypes[field]).join(', ');
          const samples = fieldSamples[field] || ['(ç„¡æœ‰æ•ˆå€¼)'];
          const sampleStr = samples.map(s => {
              if (typeof s === 'string' && s.length > 50) {
                  return s.substring(0, 47) + '...';
              }
              return typeof s === 'object' ? JSON.stringify(s).substring(0, 50) : String(s);
          }).join(' | ');

          console.log(`${(index + 1).toString().padStart(3)}. ${field.padEnd(20)} [${types}]`);
          console.log(`     æ¨£æœ¬å€¼: ${sampleStr}\n`);
      });

      // ç‰¹åˆ¥æª¢æŸ¥æ—¥æœŸç›¸é—œæ¬„ä½
      console.log('\nğŸ“… æ—¥æœŸç›¸é—œæ¬„ä½è©³ç´°åˆ†æ');
      console.log('='.repeat(50));

      const dateFields = sortedFields.filter(field =>
          field.toLowerCase().includes('date') ||
          field.toLowerCase().includes('time') ||
          field.toLowerCase().includes('create') ||
          field.toLowerCase().includes('modify') ||
          field.toLowerCase().includes('update') ||
          field.toLowerCase().includes('start') ||
          field.toLowerCase().includes('end')
      );

      if (dateFields.length > 0) {
          dateFields.forEach(field => {
              console.log(`ğŸ—“ï¸  ${field}:`);
              // é¡¯ç¤ºå‰5å€‹æ¨£æœ¬å€¼
              const samples = data.slice(0, 5).map(row => row[field]).filter(v => v);
              samples.forEach((sample, i) => {
                  console.log(`   ${i + 1}. ${sample}`);
              });
              console.log('');
          });
      } else {
          console.log('æœªæ‰¾åˆ°æ˜é¡¯çš„æ—¥æœŸæ¬„ä½');
      }

      // è¼¸å‡ºåŸå§‹æ•¸æ“šä¾›é€²ä¸€æ­¥æª¢æŸ¥
      console.log('\nğŸ’¾ å®Œæ•´æ¬„ä½æ¸…å–®ï¼ˆä¾›è¤‡è£½ä½¿ç”¨ï¼‰');
      console.log('='.repeat(50));
      console.log(JSON.stringify(sortedFields, null, 2));

      // å°‡è³‡æ–™å­˜åˆ°å…¨åŸŸè®Šæ•¸ä¾›å¾ŒçºŒæª¢æŸ¥
      window.__tableAnalysis = {
          data: data,
          fields: sortedFields,
          fieldTypes: fieldTypes,
          fieldSamples: fieldSamples,
          dateFields: dateFields
      };

      console.log('\nâœ… åˆ†æå®Œæˆï¼è³‡æ–™å·²å­˜å„²åˆ° window.__tableAnalysis');
      console.log('ğŸ’¡ å¯ä»¥ä½¿ç”¨ window.__tableAnalysis.data[0] æŸ¥çœ‹ç¬¬ä¸€ç­†å®Œæ•´è³‡æ–™');

  })();